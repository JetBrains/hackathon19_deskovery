<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        // function

        // window.addEventListener("gamepadconnected", function(event) {
        //   console.log("A gamepad connected:");
        //   var gp = event.gamepad;
        //   console.log(gp);
        //   setInterval(function () {
        //       var gamepads = navigator.getGamepads();
        //       console.log(gamepads);
        //   }, 1000)
        // });

        var lastX = 0.0;
        var lastY = 0.0;

        setInterval(function () {
            var gamepads = navigator.getGamepads();
            var gp = gamepads[0];
            if (gp) {
                var axes = gp.axes;
                var x = axes[0];
                var y = axes[1];
                if (x !== lastX || y !== lastY) {
                    lastX = x;
                    lastY = y;
                    console.log("x: " + x + "; y: " + y);
                    fetch("/push?x="+x+"&y="+y).then(function(response) {
                        console.log(response);
                    });
                }
            }
        }, 300)
    </script>
</head>
<body>
    Everything works!
</body>
</html>
